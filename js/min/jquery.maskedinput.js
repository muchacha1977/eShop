!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var A,p=navigator.userAgent,F=/iphone/i.test(p),G=/chrome/i.test(p),B=/android/i.test(p);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"};a.fn.extend({caret:function(a,e){var f;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof a?(e="number"==typeof e?e:a,this.each(function(){this.setSelectionRange?
this.setSelectionRange(a,e):this.createTextRange&&(f=this.createTextRange(),f.collapse(!0),f.moveEnd("character",e),f.moveStart("character",a),f.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(f=document.selection.createRange(),a=0-f.duplicate().moveStart("character",-1E5),e=a+f.text.length),{begin:a,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(w,e){var f,x,g,t,m,p,k,C;return!w&&
0<this.length?(f=a(this[0]),(f=f.data(a.mask.dataName))?f():void 0):(e=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},e),x=a.mask.definitions,g=[],t=k=w.length,m=null,a.each(w.split(""),function(a,e){"?"==e?(k--,t=a):x[e]?(g.push(RegExp(x[e])),null===m&&(m=g.length-1),t>a&&(p=g.length-1)):g.push(null)}),this.trigger("unmask").each(function(){function f(){if(e.completed){for(var d=m;p>=d;d++)if(g[d]&&h[d]===q(d))return;e.completed.call(c)}}function q(d){return e.placeholder.charAt(d<
e.placeholder.length?d:0)}function r(d){for(;++d<k&&!g[d];);return d}function D(d,b){var u,a;if(!(0>d)){u=d;for(a=r(b);k>u;u++)if(g[u]){if(!(k>a&&g[u].test(h[a])))break;h[u]=h[a];h[a]=q(a);a=r(a)}v();c.caret(Math.max(m,d))}}function H(d){var b,a,c;b=d;for(d=q(d);k>b;b++)if(g[b]){if(a=r(b),c=h[b],h[b]=d,!(k>a&&g[a].test(c)))break;d=c}}function I(){var d=c.val(),b=c.caret();if(d.length<C.length){for(s(!0);0<b.begin&&!g[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<m&&!g[b.begin];)b.begin++}else for(s(!0);b.begin<
k&&!g[b.begin];)b.begin++;c.caret(b.begin,b.begin);f()}function E(){s();c.val()!=z&&c.change()}function y(d,b){var a;for(a=d;b>a&&k>a;a++)g[a]&&(h[a]=q(a))}function v(){c.val(h.join(""))}function s(d){var b,a,n,f=c.val(),l=-1;for(n=b=0;k>b;b++)if(g[b]){for(h[b]=q(b);n++<f.length;)if(a=f.charAt(n-1),g[b].test(a)){h[b]=a;l=b;break}if(n>f.length){y(b+1,k);break}}else h[b]===f.charAt(n)&&n++,t>b&&(l=b);return d?v():t>l+1?e.autoclear||h.join("")===J?(c.val()&&c.val(""),y(0,k)):v():(v(),c.val(c.val().substring(0,
l+1))),t?b:m}var c=a(this),h=a.map(w.split(""),function(a,b){return"?"!=a?x[a]?q(b):a:void 0}),J=h.join(""),z=c.val();c.data(a.mask.dataName,function(){return a.map(h,function(a,b){return g[b]&&a!=q(b)?a:null}).join("")});c.one("unmask",function(){c.off(".mask").removeData(a.mask.dataName)}).on("focus.mask",function(){if(!c.prop("readonly")){clearTimeout(A);var a;z=c.val();a=s();A=setTimeout(function(){v();a==w.replace("?","").length?c.caret(0,a):c.caret(a)},10)}}).on("blur.mask",E).on("keydown.mask",
function(a){if(!c.prop("readonly")){var b,f,e=a.which||a.keyCode;C=c.val();if(8===e||46===e||F&&127===e){b=c.caret();f=b.begin;b=b.end;if(0===b-f){if(46!==e)for(;0<=--f&&!g[f];);else f=b=r(f-1);b=46===e?r(b):b}y(f,b);D(f,b-1);a.preventDefault()}else 13===e?E.call(this,a):27===e&&(c.val(z),c.caret(0,s()),a.preventDefault())}}).on("keypress.mask",function(d){if(!c.prop("readonly")){var b,e,n,m=d.which||d.keyCode,l=c.caret();if(!(d.ctrlKey||d.altKey||d.metaKey||32>m)&&m&&13!==m){if(0!==l.end-l.begin&&
(y(l.begin,l.end),D(l.begin,l.end-1)),b=r(l.begin-1),k>b&&(e=String.fromCharCode(m),g[b].test(e)))(H(b),h[b]=e,v(),n=r(b),B)?setTimeout(function(){a.proxy(a.fn.caret,c,n)()},0):c.caret(n),l.begin<=p&&f();d.preventDefault()}}}).on("input.mask paste.mask",function(){c.prop("readonly")||setTimeout(function(){var a=s(!0);c.caret(a);f()},0)});G&&B&&c.off("input.mask").on("input.mask",I);s()}))}})});
(function(f){f.fn.serializeJSON=function(a){var c,b,d,e,g,k;g=f.serializeJSON;k=g.setupOpts(a);a=this.serializeArray();g.readCheckboxUncheckedValues(a,this,k);c={};f.each(a,function(a,f){b=g.splitInputNameIntoKeysArray(f.name,k);d=b.pop();"skip"!==d&&(e=g.parseValue(f.value,d,k),k.parseWithFunction&&"_"===d&&(e=k.parseWithFunction(e,f.name)),g.deepSet(c,b,e,k))});return c};f.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,
customTypes:{},defaultTypes:{string:function(a){return String(a)},number:function(a){return Number(a)},"boolean":function(a){return-1===["false","null","undefined","","0"].indexOf(a)},"null":function(a){return-1===["false","null","undefined","","0"].indexOf(a)?a:null},array:function(a){return JSON.parse(a)},object:function(a){return JSON.parse(a)},auto:function(a){return f.serializeJSON.parseValue(a,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})}},useIntKeysAsArrayIndex:!1},setupOpts:function(a){var c,
b,d;b=f.serializeJSON;null==a&&(a={});d=b.defaultOptions||{};b="checkboxUncheckedValue parseNumbers parseBooleans parseNulls parseAll parseWithFunction customTypes defaultTypes useIntKeysAsArrayIndex".split(" ");for(c in a)if(-1===b.indexOf(c))throw Error("serializeJSON ERROR: invalid option '"+c+"'. Please use one of "+b.join(", "));c=function(b){return!1!==a[b]&&""!==a[b]&&(a[b]||d[b])};b=c("parseAll");return{checkboxUncheckedValue:c("checkboxUncheckedValue"),parseNumbers:b||c("parseNumbers"),parseBooleans:b||
c("parseBooleans"),parseNulls:b||c("parseNulls"),parseWithFunction:c("parseWithFunction"),typeFunctions:f.extend({},c("defaultTypes"),c("customTypes")),useIntKeysAsArrayIndex:c("useIntKeysAsArrayIndex")}},parseValue:function(a,c,b){var d;d=f.serializeJSON;return(c=b.typeFunctions&&b.typeFunctions[c])?c(a):b.parseNumbers&&d.isNumeric(a)?Number(a):!b.parseBooleans||"true"!==a&&"false"!==a?b.parseNulls&&"null"==a?null:a:"true"===a},isObject:function(a){return a===Object(a)},isUndefined:function(a){return void 0===
a},isValidArrayIndex:function(a){return/^[0-9]+$/.test(String(a))},isNumeric:function(a){return 0<=a-parseFloat(a)},optionKeys:function(a){if(Object.keys)return Object.keys(a);var c,b=[];for(c in a)b.push(c);return b},splitInputNameIntoKeysArray:function(a,c){var b,d;d=f.serializeJSON.extractTypeFromInputName(a,c);b=d[0];d=d[1];b=b.split("[");b=f.map(b,function(a){return a.replace(/\]/g,"")});""===b[0]&&b.shift();b.push(d);return b},extractTypeFromInputName:function(a,c){var b,d;if(b=a.match(/(.*):([^:]+)$/)){d=
f.serializeJSON;d=d.optionKeys(c?c.typeFunctions:d.defaultOptions.defaultTypes);d.push("skip");if(-1!==d.indexOf(b[2]))return[b[1],b[2]];throw Error("serializeJSON ERROR: Invalid type "+b[2]+" found in input name '"+a+"', please use one of "+d.join(", "));}return[a,"_"]},deepSet:function(a,c,b,d){var e,g,k,h;null==d&&(d={});h=f.serializeJSON;if(h.isUndefined(a))throw Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!c||0===c.length)throw Error("ArgumentError: param 'keys' expected to be an array with least one element");
e=c[0];if(1===c.length)""===e?a.push(b):a[e]=b;else{g=c[1];""===e&&(e=a.length-1,k=a[e],e=h.isObject(k)&&(h.isUndefined(k[g])||2<c.length)?e:e+1);if(""===g){if(h.isUndefined(a[e])||!f.isArray(a[e]))a[e]=[]}else if(d.useIntKeysAsArrayIndex&&h.isValidArrayIndex(g)){if(h.isUndefined(a[e])||!f.isArray(a[e]))a[e]=[]}else if(h.isUndefined(a[e])||!h.isObject(a[e]))a[e]={};c=c.slice(1);h.deepSet(a[e],c,b,d)}},readCheckboxUncheckedValues:function(a,c,b){var d,e,g;null==b&&(b={});g=f.serializeJSON;c.find("input[type\x3dcheckbox][name]:not(:checked):not([disabled])").add(c.filter("input[type\x3dcheckbox][name]:not(:checked):not([disabled])")).each(function(c,
h){d=f(h);(e=d.attr("data-unchecked-value"))?a.push({name:h.name,value:e}):g.isUndefined(b.checkboxUncheckedValue)||a.push({name:h.name,value:b.checkboxUncheckedValue})})}}})(window.jQuery||window.Zepto||window.$);